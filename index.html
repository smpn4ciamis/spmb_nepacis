<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pengumuman SPMB SMPN 4 Ciamis 2025</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/feather-icons"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(10px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideIn {
      0% { opacity: 0; transform: translateX(20px); }
      100% { opacity: 1; transform: translateX(0); }
    }
    @keyframes slideUp {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideOut {
      0% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(-20px); }
    }
    @keyframes ripple {
      0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.3); }
      100% { box-shadow: 0 0 0 20px rgba(59, 130, 246, 0); }
    }
    @keyframes borderPulse {
      0% { border-color: rgba(209, 250, 229, 0.3); }
      50% { border-color: rgba(209, 250, 229, 0.8); }
      100% { border-color: rgba(209, 250, 229, 0.3); }
    }
    @keyframes pulseText {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    .fade-in {
      animation: fadeIn 0.8s ease-out forwards;
    }
    .slide-in {
      animation: slideIn 0.6s ease-out forwards;
    }
    .slide-up {
      animation: slideUp 0.3s ease-out forwards;
    }
    .slide-out {
      animation: slideOut 0.3s ease-out forwards;
    }
    .ripple:hover {
      animation: ripple 0.6s ease-out;
    }
    .border-pulse {
      animation: borderPulse 2s infinite;
    }
    .pulse-text {
      animation: pulseText 1.5s infinite;
    }
    .hover-scale:hover {
      transform: scale(1.02);
      transition: transform 0.3s ease;
    }
    .status-icon {
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    .bg-gradient-result {
      background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
      border: 1px solid rgba(59, 130, 246, 0.2);
      transition: transform 0.3s ease;
    }
    .glow-button:hover {
      box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);
      transform: scale(1.03);
    }
    .countdown-container {
      background: rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
    }
    .particle {
      position: absolute;
      border-radius: 50%;
      animation: float 15s infinite linear;
      z-index: 0;
    }
    .particle.star {
      background: none;
      border: 1px solid rgba(59, 130, 246, 0.4);
      clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
    }
    .particle.circle {
      background: rgba(59, 130, 246, 0.2);
    }
    @keyframes float {
      0% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-100vh) rotate(180deg); }
      100% { transform: translateY(0) rotate(360deg); }
    }
    .toast {
      animation: slideIn 0.5s ease-out forwards, fadeOut 0.5s ease-out 2.5s forwards;
    }
    @keyframes slideIn {
      0% { opacity: 0; transform: translateX(100%); }
      100% { opacity: 1; transform: translateX(0); }
    }
    @keyframes fadeOut {
      0% { opacity: 1; }
      100% { opacity: 0; }
    }
    .tooltip {
      position: relative;
    }
    .tooltip:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: #3b82f6;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
      z-index: 10;
    }
    .parallax {
      background-attachment: fixed;
      background-position: center;
      background-size: cover;
    }
    .splash {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(59, 130, 246, 0.8);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      animation: fadeIn 0.3s ease-out;
    }
    body {
      overflow-x: hidden;
      overflow-y: auto;
      font-family: 'Inter', sans-serif;
    }
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-sky-100 font-sans min-h-screen text-gray-800">
  <!-- Particles Background -->
  <div id="particles" class="fixed inset-0"></div>

  <!-- Splash Screen -->
  <div id="splashScreen" class="splash hidden">
    <i data-feather="loader" class="w-12 h-12 text-white animate-spin mb-4"></i>
    <h2 class="text-2xl font-semibold text-white pulse-text">Memproses Hasil...</h2>
  </div>

  <!-- Header -->
  <header class="bg-blue-300 text-gray-800 py-8 relative overflow-hidden parallax">
    <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-10"></div>
    <div class="container mx-auto px-4 text-center relative z-10">
      <img src="https://via.placeholder.com/100?text=Logo+SMPN+4+Ciamis" alt="Logo SMPN 4 Ciamis" class="w-20 h-20 mx-auto mb-4 hover:glow transition-all">
      <h1 class="text-3xl md:text-4xl font-bold tracking-tight fade-in">Pengumuman SPMB SMPN 4 Ciamis 2025</h1>
      <p class="mt-4 text-base md:text-lg text-gray-600 fade-in">Wujudkan impianmu bersama SMPN 4 Ciamis</p>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-12 relative z-10">
    <!-- Countdown Section -->
    <section id="countdownSection" class="countdown-container rounded-2xl p-8 mb-12 max-w-4xl mx-auto fade-in hidden">
      <h2 class="text-3xl font-semibold mb-6 text-center text-gray-800">Pengumuman Segera Dibuka</h2>
      <div class="flex justify-center gap-6 text-center">
        <div class="tooltip ripple" data-tooltip="Hari tersisa">
          <p id="days" class="text-5xl font-bold text-blue-400">00</p>
          <p class="text-sm text-gray-600">Hari</p>
        </div>
        <div class="tooltip ripple" data-tooltip="Jam tersisa">
          <p id="hours" class="text-5xl font-bold text-blue-400">00</p>
          <p class="text-sm text-gray-600">Jam</p>
        </div>
        <div class="tooltip ripple" data-tooltip="Menit tersisa">
          <p id="minutes" class="text-5xl font-bold text-blue-400">00</p>
          <p class="text-sm text-gray-600">Menit</p>
        </div>
        <div class="tooltip ripple" data-tooltip="Detik tersisa">
          <p id="seconds" class="text-5xl font-bold text-blue-400">00</p>
          <p class="text-sm text-gray-600">Detik</p>
        </div>
      </div>
      <p class="mt-4 text-center text-gray-600 flex items-center justify-center">
        <i data-feather="clock" class="w-5 h-5 mr-2 text-blue-400"></i>
        Pengumuman dibuka pada 25 Juni 2025, pukul 09:00 WIB
      </p>
    </section>

    <!-- Search Section -->
    <section id="searchSection" class="bg-white rounded-2xl shadow-md p-8 mb-12 max-w-4xl mx-auto fade-in">
      <h2 class="text-3xl font-semibold mb-6 text-center text-gray-800">Cari Status Pendaftaran</h2>
      <div class="flex flex-col md:flex-row gap-4">
        <input
          type="text"
          id="searchInput"
          placeholder="Masukkan ID Pendaftaran, NISN, atau Nama..."
          class="border border-blue-200 rounded-lg px-5 py-3 flex-1 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:scale-105 transition text-lg"
          disabled
        >
        <button
          id="searchButton"
          onclick="searchResult()"
          class="bg-blue-400 text-white px-8 py-3 rounded-lg glow-button transition flex items-center text-lg tooltip ripple"
          data-tooltip="Cari hasil SPMB Anda"
          disabled
        >
          <i data-feather="search" class="w-6 h-6 mr-2"></i>Cari Hasil
        </button>
      </div>
      <p id="searchMessage" class="mt-4 text-center text-red-400 hidden">Pengumuman belum dibuka. Tunggu hingga 25 Juni 2025, 09:00 WIB.</p>
    </section>

    <!-- Result Section -->
    <section id="resultSection" class="hidden max-w-4xl mx-auto">
      <div id="resultCard" class="bg-white rounded-2xl p-10 slide-in hover-scale bg-gradient-result border-pulse"></div>
    </section>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-4 right-4 bg-gray-600 text-white px-4 py-2 rounded-lg hidden toast"></div>
  </main>

  <!-- Footer -->
  <footer class="bg-blue-300 text-gray-800 py-8 relative z-10">
    <div class="container mx-auto px-4 text-center">
      <p class="text-sm">Â© 2025 SMPN 4 Ciamis. All rights reserved.</p>
      <p class="mt-2 text-sm">Kontak: <a href="mailto:info@smpn4ciamis.sch.id" class="underline hover:text-blue-500">info@smpn4ciamis.sch.id</a></p>
    </div>
  </footer>

  <script>
    // Sample data for demonstration
    const announcements = [
      { id: "SPMB001", nisn: "1234567890", name: "Ahmad Fauzi", status: "accepted", message: "Selamat! Anda diterima di SMPN 4 Ciamis untuk tahun ajaran 2025/2026. Segera lakukan daftar ulang di sekolah sesuai jadwal!" },
      { id: "SPMB002", nisn: "0987654321", name: "Siti Nurhaliza", status: "rejected", message: "Maaf, Anda belum diterima di SMPN 4 Ciamis. Jangan putus asa, banyak sekolah lain di Ciamis menanti potensimu!" },
      { id: "SPMB003", nisn: "1122334455", name: "Budi Santoso", status: "accepted", message: "Selamat! Anda diterima di SMPN 4 Ciamis untuk tahun ajaran 2025/2026. Segera lakukan daftar ulang di sekolah sesuai jadwal!" },
      { id: "SPMB004", nisn: "6677889900", name: "Rina Amelia", status: "rejected", message: "Maaf, Anda belum diterima di SMPN 4 Ciamis. Tetap semangat, coba jalur prestasi atau sekolah lain di Ciamis!" },
    ];

    // Countdown timer
    const announcementDate = new Date("2025-06-21T09:00:00+07:00").getTime();
    const countdownSection = document.getElementById("countdownSection");
    const searchSection = document.getElementById("searchSection");
    const searchInput = document.getElementById("searchInput");
    const searchButton = document.getElementById("searchButton");
    const searchMessage = document.getElementById("searchMessage");
    const splashScreen = document.getElementById("splashScreen");

    let prevValues = { days: null, hours: null, minutes: null, seconds: null };

    function updateCountdown() {
      const now = new Date().getTime();
      const distance = announcementDate - now;

      if (distance <= 0) {
        countdownSection.classList.add("hidden");
        searchSection.classList.remove("opacity-50");
        searchInput.disabled = false;
        searchButton.disabled = false;
        searchMessage.classList.add("hidden");
        return;
      }

      countdownSection.classList.remove("hidden");
      searchSection.classList.add("opacity-50");
      searchInput.disabled = true;
      searchButton.disabled = true;
      searchMessage.classList.remove("hidden");

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);

      const elements = {
        days: document.getElementById("days"),
        hours: document.getElementById("hours"),
        minutes: document.getElementById("minutes"),
        seconds: document.getElementById("seconds"),
      };

      // Update values and trigger slide-up animation only when values change
      ["days", "hours", "minutes", "seconds"].forEach(unit => {
        const newValue = eval(unit).toString().padStart(2, "0");
        if (prevValues[unit] !== newValue) {
          elements[unit].classList.add("slide-out");
          setTimeout(() => {
            elements[unit].textContent = newValue;
            elements[unit].classList.remove("slide-out");
            elements[unit].classList.add("slide-up");
            setTimeout(() => elements[unit].classList.remove("slide-up"), 300);
          }, 300);
        }
        prevValues[unit] = newValue;
      });
    }

    // Update countdown every second
    setInterval(updateCountdown, 1000);
    updateCountdown();

    // Function to create particles
    function createParticles() {
      const particlesContainer = document.getElementById("particles");
      for (let i = 0; i < 15; i++) {
        const particle = document.createElement("div");
        particle.className = `particle ${Math.random() > 0.5 ? 'star' : 'circle'}`;
        particle.style.width = `${Math.random() * 4 + 4}px`;
        particle.style.height = particle.style.width;
        particle.style.left = `${Math.random() * 100}vw`;
        particle.style.top = `${Math.random() * 100}vh`;
        particle.style.animationDelay = `${Math.random() * 8}s`;
        particlesContainer.appendChild(particle);
      }
    }

    // Function to show toast notification
    function showToast(message, type = "info") {
      const toast = document.getElementById("toast");
      toast.textContent = message;
      toast.className = `fixed bottom-4 right-4 px-4 py-2 rounded-lg toast ${type === "success" ? "bg-blue-500" : type === "error" ? "bg-red-400" : "bg-gray-600"} text-white`;
      toast.classList.remove("hidden");
      setTimeout(() => {
        toast.classList.add("hidden");
      }, 3000);
    }

    // Function to trigger confetti for accepted status
    function triggerConfetti() {
      confetti({
        particleCount: 80,
        spread: 50,
        origin: { y: 0.5 },
        colors: ['#bfdbfe', '#93c5fd', '#60a5fa'],
        scalar: 0.8,
        drift: 0.3
      });
    }

    // Function to search and display result
    function searchResult() {
      const searchInputValue = document.getElementById("searchInput").value.trim().toLowerCase();
      const resultSection = document.getElementById("resultSection");
      const resultCard = document.getElementById("resultCard");

      if (!searchInputValue) {
        showToast("Harap masukkan ID Pendaftaran, NISN, atau Nama!", "error");
        return;
      }

      // Show splash screen and loading state
      splashScreen.classList.remove("hidden");
      searchButton.disabled = true;
      searchButton.innerHTML = '<i data-feather="loader" class="w-6 h-6 mr-2 animate-spin"></i>Sedang mencari...';
      feather.replace();

      setTimeout(() => {
        // Hide splash screen
        splashScreen.classList.add("hidden");

        // Find matching result
        const result = announcements.find(item => 
          item.id.toLowerCase() === searchInputValue ||
          item.nisn.toLowerCase() === searchInputValue ||
          item.name.toLowerCase() === searchInputValue
        );

        // Display result
        resultSection.classList.remove("hidden");
        if (result) {
          resultCard.className = `bg-white rounded-2xl p-10 slide-in hover-scale bg-gradient-result border-l-4 ${result.status === "accepted" ? "border-blue-300" : "border-red-300"} border-pulse`;
          resultCard.innerHTML = `
            <div class="flex items-center mb-6">
              <i data-feather="${result.status === "accepted" ? "check-circle" : "x-circle"}" class="w-8 h-8 ${result.status === "accepted" ? "text-blue-400" : "text-red-400"} status-icon mr-4"></i>
              <h3 class="text-2xl font-semibold text-gray-800">${result.name}</h3>
            </div>
            <p class="text-gray-600 text-base">No. Pendaftaran: ${result.id}</p>
            <p class="text-gray-600 text-base">NISN: ${result.nisn}</p>
            <p class="mt-4 text-xl font-semibold ${result.status === "accepted" ? "text-blue-500" : "text-red-500"}">
              Status: ${result.status === "accepted" ? "Diterima" : "Tidak Diterima"}
            </p>
            <p class="mt-3 text-gray-700 text-base">${result.message}</p>
            ${result.status === "rejected" ? `
              <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                <p class="text-gray-700 text-sm"><strong>Rekomendasi:</strong> Pertimbangkan SMP lain di Ciamis seperti SMPN 1 atau SMPN 2, atau ikuti jalur prestasi. Tetap semangat!</p>
              </div>
            ` : ""}
            <a
              href="hasil_spmb/${result.id}.pdf"
              target="_blank"
              class="mt-6 inline-flex items-center bg-${result.status === "accepted" ? "blue" : "red"}-300 text-gray-800 px-6 py-2 rounded-lg hover:bg-${result.status === "accepted" ? "blue" : "red"}-400 glow-button transition text-base tooltip ripple"
              data-tooltip="Unduh surat keputusan SPMB"
            >
              <i data-feather="download" class="w-5 h-5 mr-2"></i>Unduh Hasil (PDF)
            </a>
          `;
          showToast(result.status === "accepted" ? "Selamat, Anda diterima!" : "Tetap semangat!", result.status === "accepted" ? "success" : "error");
          if (result.status === "accepted") {
            setTimeout(triggerConfetti, 500);
          }
        } else {
          resultCard.className = "bg-white rounded-2xl p-10 slide-in hover-scale bg-gradient-result border-l-4 border-red-300 border-pulse";
          resultCard.innerHTML = `
            <div class="flex items-center mb-6">
              <i data-feather="alert-circle" class="w-8 h-8 text-red-400 status-icon mr-4"></i>
              <h3 class="text-2xl font-semibold text-red-500">Data Tidak Ditemukan</h3>
            </div>
            <p class="text-gray-700 text-base">Maaf, ID Pendaftaran, NISN, atau Nama yang Anda masukkan tidak ditemukan. Silakan periksa kembali input Anda.</p>
            <div class="mt-4 p-4 bg-blue-50 rounded-lg">
              <p class="text-gray-700 text-sm"><strong>Rekomendasi:</strong> Pastikan Anda memasukkan ID, NISN, atau Nama dengan benar, tanpa spasi tambahan.</p>
            </div>
          `;
          showToast("Data tidak ditemukan!", "error");
        }

        // Reset button state
        searchButton.disabled = false;
        searchButton.innerHTML = '<i data-feather="search" class="w-6 h-6 mr-2"></i>Cari Hasil';
        feather.replace();
      }, 1000); // Simulate loading delay
    }

    // Initialize particles and Feather Icons
    createParticles();
    feather.replace();
  </script>
</body>
</html>
